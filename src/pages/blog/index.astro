---
import Layout from '../../layouts/Layout.astro'
import { getCollection } from 'astro:content'

const posts = (await getCollection('blog'))
  .filter(post => post.data.published)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf())
---

<Layout title="Journal" description="Thoughts and observations">
  <div>
    <a href="/" class="hover:text-hotpink">‚Üê Back to home</a>
    <h1 class="font-semibold text-xl mt-6">###  blog</h1>
    
    {posts.length > 0 ? (
      <div class="element-spacing">
        <ul style="list-style: none; padding: 0;">
          {posts.map(post => (
            <li style="margin: 2rem 0; padding-bottom: 2rem; border-bottom: 1px solid #f0f0f0;">
              <article>
                <h2 class="font-semibold text-base">
                  <a href={`/blog/${post.slug}`}>{post.data.title}</a>
                </h2>
                <time class="text-fg-secondary/80  dark:text-fg-dark-secondary">
                  {post.data.date.toLocaleDateString('en-US', { 
                    year: 'numeric', 
                    month: 'long', 
                    day: 'numeric' 
                  })}
                </time>
                {post.data.description && (
                  <p class="mt-8 text-sm">
                    {post.data.description}
                  </p>
                )}
              </article>
            </li>
          ))}
        </ul>
      </div>
    ) : (
      <p>No posts yet.</p>
    )}
  </div>
</Layout>